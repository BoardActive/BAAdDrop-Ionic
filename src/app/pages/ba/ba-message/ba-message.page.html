<ion-header>
  <ion-toolbar class="ion-padding-top">
    <ion-buttons slot="start" class="ion-margin-start">
      <ion-button
        button-right
        size="small"
        color="light"
        (click)="close()"        
        class="ion-no-padding message-details-close"
      >
        <ion-icon name="close" class="ion-no-margin icon-sm icon-mono"></ion-icon>
      </ion-button>
    </ion-buttons>
    <!-- <h2 class="ion-no-margin fw700" (click)="developerMode()">
      Message
    </h2> -->
  </ion-toolbar>
</ion-header>
<ion-content>
  <ng-container *ngIf="isRendering" class="ion-padding-horizontal ion-padding-vertical">
    Loading...
  </ng-container>
  <ng-container *ngIf="!isRendering">
    <div class="mb-4">
      <!-- <img class="promotion-hero-img" [src]="sanitizer.bypassSecurityTrustResourceUrl(message.imageUrl)"/> -->
      <img class="promotion-hero-img" [src]="message.imageUrl" />
    </div>
    <!-- TODO this actions bar.. right now styles are hardcoded -->
    <div class="ion-padding-horizontal">
      <div class="mb-1">
        <p class="ion-no-margin text-primary fw600">{{ message.title }}</p>
      </div>
      <div class="mb-1">
        <p class="ion-no-margin text-primary text08">{{ message.body }}</p>
      </div>
      <div class="mb-4">
        <p class="ion-no-margin text-secondary text08" *ngIf="messageData.title">
          {{ messageData.title }}
        </p>
      </div>
    </div>

    <div class="ion-padding-horizontal mb-4" *ngIf="messageData.promoDateStarts">
      <div class="mb-1">
        <p class="ion-no-margin hb-small-caps text-secondary">Dates</p>
      </div>
      <p
        class="ion-no-margin text08 text-secondary"
        *ngIf="messageData.promoDateStarts"
      >
        Starts on
        <span class="bold">{{ messageData.promoDateStarts | date }}</span>
      </p>
      <p
        class="ion-no-margin text08 text-secondary"
        *ngIf="messageData.promoDateEnds"
      >
        Ends on <span class="bold">{{ messageData.promoDateEnds | date }}</span>
      </p>
    </div>
    <div class="ion-padding-horizontal mb-2" *ngIf="messageData.phoneNumber || messageData.email || messageData.storeAddress || messageData.urlLandingPage"> 
      <div class="mb-1">
        <p class="ion-no-margin hb-small-caps text-secondary">Contact</p>
      </div>

      <a
        href="tel:{{ messageData.phoneNumber }}"
        target="_blank"
        *ngIf="messageData.phoneNumber"
      >
        <ion-icon name="call" class="ion-no-margin icon-mono icon-sm"></ion-icon>
      </a>
      <a href="mailto:{{ messageData.email }}" *ngIf="messageData.email">
        <ion-icon name="mail" class="ion-no-margin icon-mono icon-sm"></ion-icon>
      </a>
      <a
        href="http://maps.google.com/?q={{ messageData.storeAddress }}"
        *ngIf="messageData.storeAddress"
      >
        <ion-icon
          name="navigate"          
          class="ion-no-margin  icon-mono icon-sm"
        ></ion-icon>
      </a>
      <a
        href="{{ messageData.urlLandingPage }}"
        *ngIf="messageData.urlLandingPage"
      >
        <ion-icon name="globe" class="ion-no-margin icon-mono icon-sm"></ion-icon>
      </a>
    </div>

    <div class="ion-padding-horizontal mb-4" *ngIf="messageData.urlFacebook || messageData.urlLinkedIn || messageData.urlTwitter || messageData.urlYoutube">
      <div class="mb-1">
        <p class="ion-no-margin hb-small-caps text-secondary">Social</p>
      </div>
      <a href="{{ messageData.urlFacebook }}" *ngIf="messageData.urlFacebook">
        <ion-icon
          name="logo-facebook"
          class="ion-no-margin icon-mono icon-sm"
        ></ion-icon>
      </a>
      <a href="{{ messageData.urlLinkedIn }}" *ngIf="messageData.urlLinkedIn">
        <ion-icon
          name="logo-linkedin"
          class="ion-no-margin icon-mono icon-sm"
        ></ion-icon>
      </a>
      <a href="{{ messageData.urlTwitter }}" *ngIf="messageData.urlTwitter">
        <ion-icon
          name="logo-twitter"
          class="ion-no-margin icon-mono icon-sm"
        ></ion-icon>
      </a>
      <a href="{{ messageData.urlYoutube }}" *ngIf="messageData.urlYoutube">
        <ion-icon
          name="logo-youtube"
          class="ion-no-margin icon-mono icon-sm"
        ></ion-icon>
      </a>

    </div>

    <!-- <iframe *ngIf="messageData.urlYoutube" width="100%" height="315" src="{{youtubeUrl}}" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>         -->

    <div class="ion-padding-horizontal mb-4" *ngIf="messageData.urlQRCode">
      <div class="mb-2">
        <p class="ion-no-margin hb-small-caps text-secondary">Scannable Coupon</p>
      </div>
      <img src="{{ messageData.urlQRCode }}" />
    </div>

    <!-- why to closes @Tom? i removed one (hunter) -->
    <!-- <div padding>
      <ion-button fill="outline" (click)="close()"
        >Close</ion-button
      >
    </div> -->

    <!-- <div class="ba-mt3 ba-mx3 ba-mb3">
          <button class="ba-btn" ion-button outline (click)="showMsg()" color="dark-grey">
              Show Message</button>
      </div> -->
  </ng-container>
</ion-content>
